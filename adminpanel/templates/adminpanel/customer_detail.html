<!doctype html>
<html>
<head><title>Customer {{ customer.id }}</title></head>
<body>
<h1>Customer Profile</h1>
<p><strong>Name:</strong> {{ customer.first_name }} {{ customer.last_name }}</p>
<p><strong>Email:</strong> {{ customer.email }}</p>
<p><strong>Phone:</strong> {{ customer.phone }}</p>
<p><strong>Address:</strong> {{ customer.address }}</p>
<p><strong>Preferred Category:</strong> {{ customer.preferred_category }}</p>
<p><strong>Total Orders:</strong> {{ total_orders }}</p>
<p><strong>Total Spent:</strong> {{ total_spent }}</p>
<hr>
<h2>Order History</h2>
<table border="1" cellpadding="6">
  <tr>
    <th>Order ID</th><th>Status</th><th>Date</th><th>Total</th><th>Items</th>
  </tr>
  {% for o in orders %}
  <tr>
    <td>{{ o.order_id }}</td>
    <td>{{ o.order_status }}</td>
    <td>{{ o.order_date }}</td>
    <td>{{ o.order_price }}</td>
    <td>
      <ul>
        {% for item in o.order_items.all %}
          <li>{{ item.product.sku }} ({{ item.quantity }})</li>
        {% endfor %}
      </ul>
    </td>
  </tr>
  {% empty %}
  <tr><td colspan="5">No orders.</td></tr>
  {% endfor %}
</table>
<p><a href="{% url 'adminpanel:customer_list' %}">Back to customers</a></p>
</body>
</html>