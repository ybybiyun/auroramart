<!doctype html>
<html>
<head><title>Customers</title></head>
<body>
<h1>Customers</h1>
<form method="get">
  <input type="text" name="q" placeholder="Search name or email" value="{{ q }}">
  <button type="submit">Search</button>
  <a href="{% url 'adminpanel:adminpanel' %}">Dashboard</a>
</form>
<table border="1" cellpadding="6">
  <tr>
    <th>ID</th><th>Name</th><th>Email</th><th>Preferred Category</th><th>Orders</th><th>Actions</th>
  </tr>
  {% for c in customers %}
  <tr>
    <td>{{ c.id }}</td>
    <td>{{ c.first_name }} {{ c.last_name }}</td>
    <td>{{ c.email }}</td>
    <td>{{ c.preferred_category }}</td>
    <td>{{ c.customer_orders.count }}</td>
    <td><a href="{% url 'adminpanel:customer_detail' c.id %}">View</a></td>
  </tr>
  {% empty %}
  <tr><td colspan="6">No customers found.</td></tr>
  {% endfor %}
</table>
<div>
  {% if customers.has_previous %}<a href="?page={{ customers.previous_page_number }}&q={{ q }}">Prev</a>{% endif %}
  Page {{ customers.number }} of {{ customers.paginator.num_pages }}
  {% if customers.has_next %}<a href="?page={{ customers.next_page_number }}&q={{ q }}">Next</a>{% endif %}
</div>
</body>
</html>